<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="keywords" content="wechat editor">
        <meta name="discription" content="A markdown editor for Wechat Subscription Accounts">
        <title>基于markdown的微信公众平台编辑器</title>
        <link rel="stylesheet" href="index.css" />
        <link rel="stylesheet" href="lib/editormd/css/editormd.min.css" />
        <link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />
    </head>
    <body>
        <div id="layout">
            <header>
                <h1>微信公众号编辑器</h1>
                <p>使用markdown编辑微信公众号文章</p>
                <p class="tips">温馨提示：</p>
                <p class="tip">插入图片地址时，可先上传至微信公众平台找到图片右键复制图片地址即可拿到；</p>
                <p class="tip">点击复制按钮即可Ctrl+V黏贴到微信公众平台编辑器；</p>
                <p class="tip">可先用其他具有随时保存的编辑器(如果不太熟悉markdown语法，推荐windows下markdownpad，mac下Mou)，以免意外丢失进度；</p>
            </header>
            <div class="btns">
                <button class="green-btn" id="copy-btn" data-clipboard-action="copy"
                        data-clipboard-target=".editormd-preview-container">复制文章</button>
                <button id="show-toolbar-btn">显示工具栏</button>
                <button id="close-toolbar-btn">隐藏工具栏</button>
                <!-- <button id="get-md-btn">获取Markdown</button>
                <button id="get-html-btn">获取HTML</button> -->
            </div>
            <div id="test-editormd">
                <textarea id="input" style="display:none;"># Example.md
**本编辑器基于editormd**
![](https://pandao.github.io/editor.md/images/logos/editormd-logo-180x180.png)
示例
====
# 标题(Heading)1
## 标题(Heading)2
### 标题(Heading)3
#### 标题(Heading)4
##### 标题(Heading)5
###### 标题(Heading)6

#### 标题（带底线的形式）Heading (underline)

This is an H1
=============

This is an H2
-------------

### 字符效果和横线等

----

~~删除线~~ <s>删除线（开启识别HTML标签时）</s>
*斜体字*      _斜体字_
**粗体**  __粗体__
***粗斜体*** ___粗斜体___

上标：X<sup>2</sup>，下标：O<sub>2</sub>

**缩写(同HTML的abbr标签)**

> 即更长的单词或短语的缩写形式，前提是开启识别HTML标签时，已默认开启

The <abbr title="Hyper Text Markup Language">HTML</abbr> specification is maintained by the <abbr title="World Wide Web Consortium">W3C</abbr>.

### 引用 Blockquotes

> 引用文本 Blockquotes

引用的行内混合 Blockquotes

> 引用：如果想要插入空白换行`即<br />标签`，在插入处先键入两个以上的空格然后回车即可，[普通链接](http://localhost/)。

### 锚点与链接 Links

**Tip：**(*微信中链接会失效，应该是其屏蔽机制*)

[普通链接](http://www.qq.com/)

[普通链接带标题](http://www.qq.com/ "普通链接带标题")

直接链接：<https://github.com>

[锚点链接][anchor-id]

[anchor-id]: http://www.this-anchor-link.com/

[mailto:test.test@gmail.com](mailto:test.test@gmail.com)


### 多语言代码高亮 Codes

#### 行内代码 Inline code

执行命令：`npm install marked`

#### 缩进风格

即缩进四个空格，也做为实现类似 `<pre>` 预格式化文本 ( Preformatted Text ) 的功能。

    <?php
        echo "Hello world!";
    ?>

预格式化文本：

    | First Header  | Second Header |
    | ------------- | ------------- |
    | Content Cell  | Content Cell  |
    | Content Cell  | Content Cell  |

#### JS代码

```javascript
function test() {
    console.log("Hello world!");
}

(function(){
    var box = function() {
        return box.fn.init();
    };

    box.prototype = box.fn = {
        init : function(){
            console.log('box.init()');

        return this;
    },

    add : function(str) {
        alert("add", str);

        return this;
    },

    remove : function(str) {
        alert("remove", str);

        return this;
    }
    };

    box.fn.init.prototype = box.fn;

    window.box =box;
})();

var testBox = box();
testBox.add("jQuery").remove("jQuery");
```

#### HTML 代码 HTML codes

```html
<!DOCTYPE html>
<html>
<head>
    <mate charest="utf-8" />
    <meta name="keywords" content="Editor.md, Markdown, Editor" />
    <title>Hello world!</title>
    <style type="text/css">
        body{font-size:14px;color:#444;font-family: "Microsoft Yahei", Tahoma, "Hiragino Sans GB", Arial;background:#fff;}
        ul{list-style: none;}
        img{border:none;vertical-align: middle;}
    </style>
</head>
<body>
<h1 class="text-xxl">Hello world!</h1>
<p class="text-green">Plain text</p>
</body>
</html>
```

### 图片 Images

Image:

![](http://oe0s6qq46.bkt.clouddn.com/kashgar.jpg)

> 喀什

图片加链接 (Image + Link)：

[![](http://oe0s6qq46.bkt.clouddn.com/Kiminonawa.jpg)](http://oe0s6qq46.bkt.clouddn.com/Kiminonawa.jpg "君の名は")

> 图为：君の名は

----

### 列表 Lists

#### 无序列表（减号）Unordered Lists (-)

- 列表一
- 列表二
- 列表三

#### 无序列表（星号）Unordered Lists (*)

* 列表一
* 列表二
* 列表三

#### 无序列表（加号和嵌套）Unordered Lists (+)

+ 列表一
+ 列表二
    + 列表二-1
    + 列表二-2
    + 列表二-3
+ 列表三
    * 列表一
    * 列表二
    * 列表三

#### 有序列表 Ordered Lists (-)

1. 第一行
2. 第二行
3. 第三行

#### GFM task list（微信中失效）

- [x] GFM task list 1
- [x] GFM task list 2
- [ ] GFM task list 3
    - [ ] GFM task list 3-1
    - [ ] GFM task list 3-2
    - [ ] GFM task list 3-3
- [ ] GFM task list 4
    - [ ] GFM task list 4-1
    - [ ] GFM task list 4-2

----

### 绘制表格 Tables

**Tip：**(*冒号为对齐方式，默认左对齐，右边为右对齐，都有则为居中*)

| 项目        | 价格   |  数量  |
| :--------   | -----: | :----: |
| 计算机      | $1600  |   5    |
| 手机        |   $12  |   12   |
| 管线        |    $1  |  234   |

**Tip：**(*当然也可省略两侧竖线*)

First Header  | Second Header
------------- | -------------
Content Cell  | Content Cell
Content Cell  | Content Cell

| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |

----

### 特殊符号 HTML Entities Codes

    © &  ¨ ™ ¡ £
    & < > ¥ € ® ± ¶ § ¦ ¯ « ·

    X² Y³ ¾ ¼  ×  ÷   »

    18ºC  "  '

[========]

### Emoji表情

**Tip：**(*可通过工具栏的emoji按钮选择所需的表情*)  :smiley:
:scream::scream::scream:

> Blockquotes :star:

### 反斜杠（用来转义字符）

\*literal asterisks\*

[========]

### 科学公式 TeX(KaTeX)
**Tip：**(*微信中效果不太理想，慎用*)

$$E=mc^2$$

行内的公式$$E=mc^2$$行内的公式，行内的$$E=mc^2$$公式。

$$x > y$$

$$\(\sqrt{3x-1}+(1+x)^2\)$$

$$\sin(\alpha)^{\theta}=\sum_{i=0}^{n}(x^i + \cos(f))$$

多行公式：

```math
\displaystyle
\left( \sum\_{k=1}^n a\_k b\_k \right)^2
\leq
\left( \sum\_{k=1}^n a\_k^2 \right)
\left( \sum\_{k=1}^n b\_k^2 \right)
```

```katex
\displaystyle
    \frac{1}{
        \Bigl(\sqrt{\phi \sqrt{5}}-\phi\Bigr) e^{
        \frac25 \pi}} = 1+\frac{e^{-2\pi}} {1+\frac{e^{-4\pi}} {
        1+\frac{e^{-6\pi}}
        {1+\frac{e^{-8\pi}}
         {1+\cdots} }
        }
    }
```

```latex
f(x) = \int_{-\infty}^\infty
    \hat f(\xi)\,e^{2 \pi i \xi x}
    \,d\xi
```

### 分页符 Page break

> Print Test: Ctrl + P

[========]

### 绘制流程图 Flowchart
**Tip：**(*微信中效果不太理想，可能会超出屏幕，慎用*)

```flow
st=>start: 用户登陆
op=>operation: 登陆操作
cond=>condition: 登陆成功 Yes or No?
e=>end: 进入后台

st->op->cond
cond(yes)->e
cond(no)->op
```

[========]

### End!
</textarea>
            </div>
        </div>
        <script src="lib/jquery.min.js"></script>
        <script src="lib/clipboard.min.js"></script>
        <script src="lib/editormd/editormd.min.js"></script>
        <script type="text/javascript">
            var testEditor;
            var _save = function(data){
            localStorage.setItem("autosave", JSON.stringify(data));
            }

            var _read = function(){
            return localStorage.getItem("autosave");
            }

            var data = {
            content: null,
            date: null
            }
            var _formatTime = function(date){
                return date.getFullYear() + '-' + date.getMonth() + '-' + date.getDate() + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds() ;
            }
            if(_read()){
                $("#input").value = JSON.parse(_read()).content;
            }
            setInterval(function(){
                data.content = $("#input");
                data.date = _formatTime(Date.now());
                _save(data);
            }, 60*1000);
            $(function() {
                testEditor = editormd("test-editormd", {
                    width: "90%",
                    height: 740,
                    path : './lib/editormd/lib/',
                    theme : "default",
                    previewTheme : "default",
                    editorTheme : "pastel-on-dark",
                    codeFold : true,
                    //syncScrolling : false,
                    saveHTMLToTextarea : true,    // 保存 HTML 到 Textarea
                    searchReplace : true,
                    //watch : false,                // 关闭实时预览
                    htmlDecode : "style,script,iframe|on*",            // 开启 HTML 标签解析，为了安全性，默认不开启
                    //toolbar : false,             //关闭工具栏
                    //previewCodeHighlight : false, // 关闭预览 HTML 的代码块高亮，默认开启
                    emoji : true,
                    taskList : true,
                    tocm : true,         // Using [TOCM]
                    tex : true,                   // 开启科学公式TeX语言支持，默认关闭
                    flowChart : true,             // 开启流程图支持，默认关闭
                    // sequenceDiagram : true,       // 开启时序/序列图支持，默认关闭,
                    //dialogLockScreen : false,   // 设置弹出层对话框不锁屏，全局通用，默认为true
                    //dialogShowMask : false,     // 设置弹出层对话框显示透明遮罩层，全局通用，默认为true
                    //dialogDraggable : false,    // 设置弹出层对话框不可拖动，全局通用，默认为true
                    //dialogMaskOpacity : 0.4,    // 设置透明遮罩层的透明度，全局通用，默认值为0.1
                    //dialogMaskBgColor : "#000", // 设置透明遮罩层的背景颜色，全局通用，默认为#fff
                    imageUpload : false
                });

                $("#show-btn").bind('click', function(){
                    testEditor.show();
                });

                $("#hide-btn").bind('click', function(){
                    testEditor.hide();
                });

                $("#get-md-btn").bind('click', function(){
                    alert(testEditor.getMarkdown());
                });

                $("#get-html-btn").bind('click', function() {
                    alert(testEditor.getHTML());
                });

                $("#watch-btn").bind('click', function() {
                    testEditor.watch();
                });

                $("#unwatch-btn").bind('click', function() {
                    testEditor.unwatch();
                });

                $("#preview-btn").bind('click', function() {
                    testEditor.previewing();
                });

                $("#fullscreen-btn").bind('click', function() {
                    testEditor.fullscreen();
                });

                $("#show-toolbar-btn").bind('click', function() {
                    testEditor.showToolbar();
                });

                $("#close-toolbar-btn").bind('click', function() {
                    testEditor.hideToolbar();
                });
                //
                // $("#toc-menu-btn").click(function(){
                //     testEditor.config({
                //         tocDropdown   : true,
                //         tocTitle      : "目录 Table of Contents",
                //     });
                // });
                //
                // $("#toc-default-btn").click(function() {
                //     testEditor.config("tocDropdown", false);
                // });
                
            });
            $('document').ready(function () {
                new Clipboard('#copy-btn');
                
            });
            
        </script>
    </body>
</html>
